export class WeatherManager {
    constructor() {
        this.weatherElement = document.getElementById('weather');
        this.weatherArtElement = document.getElementById('weather-art');
        this.currentWeatherType = 'clear';
        this.animationFrame = 0;
        this.weatherConditions = {
            0: 'clear',
            1: 'clouds', 2: 'clouds', 3: 'clouds',
            45: 'mist', 48: 'mist',
            51: 'drizzle', 53: 'drizzle', 55: 'drizzle',
            56: 'drizzle', 57: 'drizzle',
            61: 'rain', 63: 'rain', 65: 'rain',
            66: 'rain', 67: 'rain',
            71: 'snow', 73: 'snow', 75: 'snow',
            77: 'snow',
            80: 'rain', 81: 'rain', 82: 'rain',
            85: 'snow', 86: 'snow',
            95: 'thunderstorm', 96: 'thunderstorm', 99: 'thunderstorm'
        };

const now = new Date();
const yearString = now.toLocaleDateString('en-US', {year: 'numeric'});

this.weatherArt = {
thunderstorm: [
`           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   (_,   ._/  \`-'.-(\`  )     
      '   '--'      '\`--.__.--\`      :(      ))   
        '   '  .')'    '      '    ' \`(    )  ))  
           '  (_  )  '    '         '  \` __.:'    
         '         _.       '     '               
           ' '    /__\`A   ,_        ' '           
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   (_,   ._/  \`-'.-(\`  )     
          '--'      '\`--.__.--\`      :(      ))   
       '       .')   '     '         \`(    )  ))  
         '   '(_  )'    '      '    '  \` __.:'    
            '    ( _. '    '         '            
          '       /__\`A   ,_ '     '              
            ' '   |= |;._.}{__       ' '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   (_,   ._/  \`-'.-(\`  )     
          '--'     ''\`--.__.--\` ' '  :(      ))   
               .')                   \`(    )  ))  
        '     (_  )   '     '    '     \` __.:'    
          '   '  ( _'    '      '    '            
             '    /__\`A'  ,_'         '           
           '      |= |;._.}{__'     '             
            _.-""-|.' # '. \`  \`.-"{}<._ '         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   (_,   ._/' \`-'.-(\`  )     
      '   '--'      '\`--/__\\--\`'     :(      ))   
        ' '    .')  '            ' ' \`(    )  ))  
              (_  )                    \` __.:'    
         '   '     _.  '     '    '               
           '   '  /__\`A   ,_     '    '           
              '   |= |;._.}{__         '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`
           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   /\\.   ._/' \`-'.-(\`  )     
         ''--'     ''\`--\\\` \\--\`   '  :(      ))   
       '       .')      _\\ _\\   '    \`(    )  ))  
         ' '  (_  )  '  \`\\ \\      ' '  \` __.:'    
                   _.  \\ _\\_\\                     
          '   '   /__\`A '\`\\\\  '    '              
            '   ' |= |;.__\`\\-'-*  '    '          
            _.-""-|.' # '. \`  \`.-"{}<._ '         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).          _.-._    _               
        (     ),      _.(.--. ) (\`  )\`.           
       _(       '\`-.(        '-)_ .    )          
   .=(\`(      .   ) .-  (_,  (_,))-.  ) )         
  ((    (..__.;'-' /.      ./  , _\\  ) )          
  \`(       ) )' '( \\  (  .     )  /   )  ._       
    \` __.:'   )'--._(   (_,   ._/  \`-'.-(\`  )     
       '  '--'   '  '\`--.__.--\`   '  :(      ))   
          '    .')  '    ' *       ' \`(    )  ))  
        '     (_  )    *   |  *  '     \` __.:'    
          ' '      _. '\\ \\ | / /   ' '            
                  /__\`A \\ ,_ /  *                 
           '   '  |= |;._.}{__ '    '             
            _.-""-|.' # '. \`  \`.-"{}<._ '         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

clear: [
`                         '                        
                  .      \`      .                 
            ,      ,     :     ,      ,           
             \`.        ______       .\`            
               '  _.-"\`      \`"-._ '              
                .'                '.              
         \`'--, /                    \\ ,--'\`       
              /                      \\            
             ;                        ;           
             |                        |           
       - -- (                          ) -- -     
             |     _.                 |           
             ;    /__\`A   ,_          ;           
         .-'  \\   |= |;._.}{__       /  '-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`                         '                        
                  .      \`      .                 
            ,      ,     :     ,      ,           
             \`.        ______       .\`            
               '  _.-"\`      \`"-._ '              
                .'                '.              
         \`'--, /                    \\ ,--'\`       
              /                      \\            
             ;                        ;           
             |                        |           
       - -- (                          ) -- -     
             |   ( _.                 |           
             ;    /__\`A   ,_          ;           
         .-'  \\   |= |;._.}{__       /  '-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`                         '                        
                  .      \`      .                 
            ,      ,     :     ,      ,           
             \`.        ______       .\`            
               '  _.-"\`      \`"-._ '              
                .'                '.              
         \`'--, /                    \\ ,--'\`       
              /                      \\            
             ;                        ;           
             |                        |           
       - -- (       )                  ) -- -     
             |   ( _.                 |           
             ;    /__\`A   ,_          ;           
         .-'  \\   |= |;._.}{__       /  '-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`                         '                        
                  .      '      .                 
            .      .     ;     .      .           
             '.        ______       .'            
               \`  _.-"\`      \`"-._ \`              
                .'                '.              
         \`'--. /                    \\ .--'\`       
              /                      \\            
             ;                        ;           
             |    (                   |           
       - -- (       )                  ) -- -     
             |     _.                 |           
             ;    /__\`A   ,_          ;           
         .-\`  \\   |= |;._.}{__       /  \`-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`                         '                        
                  .      '      .                 
            .      .     ;     .      .           
             '.        ______       .'            
               \`  _.-"\`      \`"-._ \`              
                .'                '.              
         \`'--. /                    \\ .--'\`       
              /                      \\            
             ;       )                ;           
             |    (                   |           
       - -- (                          ) -- -     
             |     _.                 |           
             ;    /__\`A   ,_          ;           
         .-\`  \\   |= |;._.}{__       /  \`-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`                         '                        
                  .      '      .                 
            .      .     ;     .      .           
             '.        ______       .'            
               \`  _.-"\`      \`"-._ \`              
                .'                '.              
         \`'--. /                    \\ .--'\`       
              /                      \\            
             ;       )                ;           
             |                        |           
       - -- (                          ) -- -     
             |     _.                 |           
             ;    /__\`A   ,_          ;           
         .-\`  \\   |= |;._.}{__       /  \`-.       
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

clouds  : [
`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )     (   )  ._       
    \` __.:'   )     (   (   ))     \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
               .')                   \`(    )  ))  
              (_  )                    \` __.:'    
                   _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )     (   )  ._       
    \` __.:'   )     (   (   ))     \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
               ,')                   \`(    )  ))  
              (_  )                    \` __.:'    
                 ( _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`           _                                      
         (\`  ),                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   ,=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )     (   )  ._       
    \` __.:'   )     (   (   ))     \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
               .')                   \`(    )  ))  
              (_  ) )                  \` __.;'    
                 ( _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`,           
       _(       '\`.          ;(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   ,  )     (   )  ._       
    \` __.:'   )     (   (   ))     \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
               .')(                  \`(    )  ))  
              (_  ) )                  \` __.;'    
                   _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (,.__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )     (   )  ._       
    \` __.:'   )     (   (   ))     \`-'.-(\`  )     
           --'      )\`- __.'         ;(      ))   
               .')(                  \`(    )  ))  
              (_  )                    \` __.;'    
                   _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ),                   _               
        (     ).              .;(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )       (   ,  )     (   )  ._       
    \` __.;'   )     (   (   ))     \`-'.-(\`  )     
           --'      )\`- __.'         :(      ))   
               .')                   \`(    )  ))  
              (_  )                    \` __,:'    
                   _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

rain: [
`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )' '    (   .  ) ' ' (   )  ._       
    \` __.:'   )    '(   (   ))     \`-'.-(\`  )     
      '   '--'      '\`- __.'   '     :(      ))   
        '   '  .')'    '      '      \`(    )  ))  
           '  (_  )  '    '         '  \` __.:'    
         '         _.       '     '               
           ' '    /__\`A   ,_        ' '           
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )'    (   )  ._       
    \` __.:'   )' '  (   (   )) ' ' \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
       '   '   ,')   '     '    '    \`(    )  ))  
         '   '(_  )'    '      '       \` __.:'    
            '    ( _. '    '         '            
          '       /__\`A   ,_ '     '              
            ' '   |= |;._.}{__       ' '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`           _                                      
         (\`  ),                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   ,=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     ' (   .  )   ' (   )  ._       
   '\` __.:'   )     (   (   ))'    \`-'.-(\`  )     
       ' ' --'  ' '  \`- __.'    ' '  :(      ))   
               .')                   \`(    )  ))  
        '   ' (_  ) ) '     '    '     \` __.;'    
          '   '  ( _'    '      '                 
             '    /__\`A   ,_'         '           
           '      |= |;._.}{__'     '             
            _.-""-|.' # '. \`  \`.-"{}<._ '         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`,           
       _(       '\`.          ;(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )'      (   ,  )     (   )  ._       
    \` __.:'   )     (   (   ))   ' \`-'.-(\`  )     
      '    --'       \`- __.'   '     :(      ))   
        ' '    .')( '            ' ' \`(    )  ))  
              (_  ) )                  \` __.;'    
         '   '     _.  '     '    '               
           '   '  /__\`A   ,_     '                
              '   |= |;._.}{__         '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,

`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (,.__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )'    (   )  ._       
    \` __.:'   )'    (   (   ))     \`-'.-(\`  )     
         ' --'      )\`- __.'      '  ;(      ))   
       '       .')(       '     '    \`(    )  ))  
         ' '  (_  )  '            ' '  \` __.;'    
                   _.                             
          '   '   /__\`A ' ,_  '    '              
            '   ' |= |;._.}{__    '               
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`           _                                      
         (\`  ),                   _               
        (     ).              .;(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     ' (   ,  )     (   )  ._       
    \` __.;'   )     (   (   ))'    \`-'.-(\`  )     
       '   --'  '   )\`- __.' '       :(      ))   
          '    .')  '    '         ' \`(    )  ))  
        '     (_  )        '     '     \` __,:'    
          ' '      _. '            ' '            
                  /__\`A   ,_                      
           '   '  |= |;._.}{__ '    '             
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

snow: [
`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )* *    (   .  ) * * (   )  ._       
    \` __.:'   )    *(   (   ))     \`-'.-(\`  )     
      *   '--'      *\`- __.'   *     :(      ))   
        *   *  .')*    *      *      \`(    )  ))  
           *  (_  )  *    *         *  \` __.:'    
         *         _.       *     *               
           * *    /__\`A   ,_        * *           
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,
`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )*    (   )  ._       
    \` __.:'   )* *  (   (   )) * * \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
       *   *   ,')   *     '    *    \`(    )  ))  
         *   *(_  )'    *      *       \` __.:'    
            *    ( _. *    *         *            
          *       /__\`A   ,_ *     *              
            * *   |= |;._.}{__       * *          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`           _                                      
         (\`  ),                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   ,=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     * (   .  )   * (   )  ._       
   '\` __.:'   )     (   (   ))*    \`-'.-(\`  )     
       * * --'  * *  \`- __.'    * *  :(      ))   
               .')                   \`(    )  ))  
        *   * (_  ) ) *     *    *     \` __.;'    
          *   *  ( _'    *      *                 
             *    /__\`A   ,_*         *           
           *      |= |;._.}{__*     *             
            _.-""-|.' # '. \`  \`.-"{}<._ *         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,
`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`,           
       _(       '\`.          ;(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )*      (   ,  )     (   )  ._       
    \` __.:'   )     (   (   ))   * \`-'.-(\`  )     
      *    --'       \`- __.'   *     :(      ))   
        * *    .')( *            * * \`(    )  ))  
              (_  ) )                  \` __.;'    
         *   *     _.  *     *    *               
           *   *  /__\`A   ,_     *                
              *   |= |;._.}{__         *           
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (,.__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )*    (   )  ._       
    \` __.:'   )*    (   (   ))     \`-'.-(\`  )     
         ' --'      )\`- __.'      *  ;(      ))   
       *       .')(       '     *    \`(    )  ))  
         * *  (_  )  *            * *  \` __.;'    
                   _.                             
          *   *   /__\`A ' ,_  *    *              
            *   * |= |;._.}{__    *               
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,
`
           _                                      
         (\`  ),                   _               
        (     ).              .;(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     * (   ,  )     (   )  ._       
    \` __.;'   )     (   (   ))*    \`-'.-(\`  )     
       *   --'  *   )\`- __.' *       :(      ))   
          *    .')  *    *         * \`(    )  ))  
        *     (_  )        *     *     \` __,:'    
          * *      _. *            * *            
                  /__\`A   ,_                      
           *   *  |= |;._.}{__ *    *             
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

mist: [
`             ________             ._______        
         -----         ______,--._                
          ----,____.---           ---   _______.  
    ._____       ____     -,_____.-----.          
          -------    ---             --.________- 
    ____,---.____.        ----____---             
  --        ___________.          ._______        
      ------           ______,--._           -----
          ----.___,----           ---   _______.  
         ___      ____     -._____,-----.         
           ------    ---             --.___       
                   _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`              ________             ._______       
         -----         ______,--._                
          ----.___,----           ---   _______.  
   ._____       ____     -._____,-----.           
          -------    ---             --.________- 
    ____,----.___,        ---____----             
  --        ___________.          ._______        
      ------           ______,--._           -----
          ----.___,----           ---   _______.  
        __       ____     -._____,-----.          
          -------    ---             --,___       
                 ( _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`              ________             ._______       
          -----         ______,--._               
          ----.___,----           ---   _______.  
    ._____        .__     -._____,-----.          
         -----__-   ---             --.________-  
   ____,---.____.        ----____---              
   --        ___________.          ._______       
      ------           ______,--._           -----
          ----.___,----           ---   _______.  
        __       ____     -._____,-----.          
          -------   )---             --.___       
                 ( _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`                                                  
              ,_______             ._______       
         __---         ______,--._                
           _---.___,----           ---   _______. 
    ._____       ____     -._____,-----.          
          -------    ---             --.________- 
    ____,---.____.        ---____----             
  --        _____--____,          ._______        
      ------           ______,--._           -----
         ----.___(----           ---   _______.   
        ___      ___)     -._____,-----.          
           ------  _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
`                                                  
              ________             ._______       
        -----         ______,--._                 
          ----.___,----           ---   _______,  
    ._____       ____     -._____,-----.          
          ---__--    ---             --,________- 
    ____,---.____.        ---____----             
  --        ____--_____.          ._______        
      ------        )  ______,--._           -----
          ----.__(,----           ---   _______,  
         ___      ____     -._____.-----.         
            ------ _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.         
`,

`                                                  
              ________             ,_______       
          -----         ______,--._               
          ----.___,----           ---   _______.  
    ,_____       ____     -._____.-----,          
          -------    ---             --.________- 
    ____.---.____.        ----____---             
  --        ___________.          ._______        
      ------        )  ______,--._           -----
          ----.___,----           ---   _______.  
        ____     ____     -._____,-----.          
            -----  _.                             
                  /__\`A   ,_                      
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.         
`,
],

drizzle: [
`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )'      (   .  )   ' (   )  ._       
    \` __.:'   )    '(   (   ))     \`-'.-(\`  )     
      '    --'      '\`- __.'         :(      ))   
            '  .')'           '      \`(    )  ))  
              (_  )  '              '  \` __.:'    
         '         _.       '                     
             '    /__\`A   ,_          '           
                  |= |;._.}{__                    
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.jgs      
`,

`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )     (   )  ._       
    \` __.:'   )'    (   (   ))   ' \`-'.-(\`  )     
           --'       \`- __.'         :(      ))   
       '       ,')   '     '         \`(    )  ))  
             '(_  )'           '       \` __.:'    
                 ( _. '              '            
          '       /__\`A   ,_ '                    
              '   |= |;._.}{__         '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.jgs      
`,

`           _                                      
         (\`  ),                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`.          :(   .    )          
   ,=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.:'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     ' (   .  )   ' (   )  ._       
   '\` __.:'   )     (   (   ))     \`-'.-(\`  )     
         ' --'  '    \`- __.'      '  :(      ))   
               .')                   \`(    )  ))  
        '     (_  ) ) '     '          \` __.;'    
              '  ( _'           '                 
                  /__\`A   ,_          '           
           '      |= |;._.}{__'                   
            _.-""-|.' # '. \`  \`.-"{}<._ '         
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.jgs      
`,

`           _                                      
         (\`  ).                   _               
        (     ),              .:(\`  )\`,           
       _(       '\`.          ;(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )'      (   ,  )     (   )  ._       
    \` __.:'   )     (   (   ))   ' \`-'.-(\`  )     
      '    --'       \`- __.'         :(      ))   
          '    .')(                ' \`(    )  ))  
              (_  ) )                  \` __.;'    
         '         _.  '     '                    
               '  /__\`A   ,_     '                
                  |= |;._.}{__         '          
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.jgs      
`,

`           _                                      
         (\`  ).                   _               
        (     ).              .:(\`  )\`.           
       _(       '\`,          :(   .    )          
   .=(\`(      .   )     .--  \`.  (    ) )         
  ((    (,.__.:'-''  .+(   )   \` _\`  ) )          
  \`(       ) )       (   .  )'    (   )  ._       
    \` __.:'   )'    (   (   ))     \`-'.-(\`  )     
           --'      )\`- __.'      '  ;(      ))   
       '       .')(       '          \`(    )  ))  
           '  (_  )                 '  \` __.;'    
                   _.                             
          '       /__\`A ' ,_  '                   
                ' |= |;._.}{__    '               
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|;:;_.-'\` '::.  \`"-        
             .:;.      .:.   ::.     '::.jgs      
`,

`           _                                      
         (\`  ),                   _               
        (     ).              .;(\`  )\`.           
       _(       '\`.          :(   .    )          
   .=(\`(      .   )     ,--  \`.  (    ) )         
  ((    (..__.;'-'   .+(   )   \` _\`  ) )          
  \`(       ) )     ' (   ,  )     (   )  ._       
    \` __.;'   )     (   (   ))'    \`-'.-(\`  )     
       '   --'  '   )\`- __.' '       :(      ))   
               .')  '    '         ' \`(    )  ))  
        '     (_  )        '           \` __,:'    
            '      _.                '            
                  /__\`A   ,_                      
           '      |= |;._.}{__ '                  
            _.-""-|.' # '. \`  \`.-"{}<._           
                  / ${(yearString)}  \\     \\  x   \`"         
             ----/         \\_.-'|--X----          
             -=_ |         |    |- X.  =_.        
            - __ |_________|_.-'|_X-X##.          
            jgs \`'-._|_|:;:_.-'\` '::.  \`"-        
             .;:.      .:.   ::.     ';:.jgs      
`,
]
};
}

    init() {
        this.fetchWeather();
        this.startWeatherAnimation();
        setInterval(() => this.fetchWeather(), 300000);
    }

    async fetchWeather() {
        try {
            const cachedWeather = localStorage.getItem('cachedWeather');
            const cachedTime = localStorage.getItem('cachedWeatherTime');
            
            if (cachedWeather && cachedTime && (Date.now() - parseInt(cachedTime)) < 300000) {
                this.updateWeather(JSON.parse(cachedWeather));
                return;
            }

            const position = await this.getLocation();
            const { latitude, longitude } = position.coords;
            const url = `/api/weatherapi?latitude=${latitude}&longitude=${longitude}`;

            const response = await fetch(url);
            const data = await response.json();
            
            localStorage.setItem('cachedWeather', JSON.stringify(data));
            localStorage.setItem('cachedWeatherTime', Date.now().toString());

            this.updateWeather(data);
        } catch (error) {
            console.error('Error fetching weather:', error);
            this.weatherElement.innerHTML = this.createWeatherHTML('unknown', 'N/A');
            this.weatherArtElement.textContent = '';
        }
    }

    updateWeather(data) {
        const { temperature: temp, weathercode: weatherCode } = data.current_weather;
        console.log('Weather code:', weatherCode);
        this.currentWeatherType = this.weatherConditions[weatherCode] || 'clear';
        console.log('Current weather type:', this.currentWeatherType);
        this.weatherElement.innerHTML = this.createWeatherHTML(this.currentWeatherType, temp);
        this.startWeatherAnimation();
    }

    createWeatherHTML(type, temp) {
        return `+-------------------+
|     WEATHER       |
|     ${this.padRight(type, 12)}  |
|     ${this.padRight(temp + '°C', 12)}  |
+-------------------+`;
    }

    startWeatherAnimation() {
        setInterval(() => this.updateWeatherAnimation(), 500);
    }

    updateWeatherAnimation() {
        const currentArt = this.weatherArt[this.currentWeatherType][this.animationFrame % this.weatherArt[this.currentWeatherType].length];
        this.weatherArtElement.textContent = currentArt;
        this.animationFrame++;
    }

    getLocation() {
        return new Promise((resolve, reject) => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(resolve, reject);
            } else {
                reject(new Error("Geolocation is not supported by this browser."));
            }
        });
    }

    padRight(str, length, padChar = ' ') {
        return str + padChar.repeat(Math.max(0, length - str.length));
    }
}